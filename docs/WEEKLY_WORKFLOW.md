# å‘¨æ–‡ä»¶å¤¹å·¥ä½œæµä½¿ç”¨æŒ‡å—

## æ¦‚è¿°

ä¸ªäººAI OSç³»ç»Ÿæ”¯æŒåŸºäºè‡ªç„¶å‘¨ï¼ˆä»¥å‘¨ä¸€ä¸ºåŸºå‡†ï¼‰çš„æ–‡æ¡£ç®¡ç†å’Œè‡ªåŠ¨æ‘˜è¦å¤„ç†ã€‚ä½ å¯ä»¥å°†å¹³æ—¶æœé›†çš„é‡è¦æ–‡æ¡£æ”¾å…¥å¯¹åº”çš„å‘¨æ–‡ä»¶å¤¹ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨è¿›è¡Œä¿¡æ¯å¤„ç†å’Œæ–‡æ¡£æ‘˜è¦ã€‚

## æ ¸å¿ƒæ¦‚å¿µ

### å‘¨æ–‡ä»¶å¤¹å‘½åè§„åˆ™

- **æ ¼å¼**: `data/raw/YYYY-MM-DD/`
- **æ—¥æœŸ**: ä½¿ç”¨è¯¥å‘¨çš„**å‘¨ä¸€**æ—¥æœŸ
- **ç¤ºä¾‹**: 
  - 2025-11-10ï¼ˆå‘¨ä¸€ï¼‰åˆ° 2025-11-16ï¼ˆå‘¨æ—¥ï¼‰è¿™ä¸€å‘¨
  - æ–‡ä»¶å¤¹åç§°ä¸º: `2025-11-10`

### å·¥ä½œæµç¨‹

```
æ”¶é›†æ–‡æ¡£ â†’ æ”¾å…¥å‘¨æ–‡ä»¶å¤¹ â†’ è‡ªåŠ¨æ‘˜è¦ â†’ ç”ŸæˆMedium-Rareæ–‡æ¡£
```

## ä½¿ç”¨æ–¹æ³•

### 1. è·å–/åˆ›å»ºå½“å‰å‘¨æ–‡ä»¶å¤¹

```bash
# è·å–å½“å‰å‘¨æ–‡ä»¶å¤¹è·¯å¾„ï¼ˆè‡ªåŠ¨åˆ›å»ºï¼‰
python -m scripts.cli week-folder

# è¾“å‡ºç¤ºä¾‹ï¼š
# âœ… å½“å‰å‘¨æ–‡ä»¶å¤¹: /path/to/data/raw/2025-11-10
# ğŸ’¡ æç¤º: å°†æ–‡æ¡£æ”¾å…¥æ­¤æ–‡ä»¶å¤¹ï¼Œç„¶åè¿è¡Œ 'python -m scripts.cli ingest' è¿›è¡Œæ‘˜è¦å¤„ç†
```

### 2. æŸ¥çœ‹å½“å‰å‘¨æ–‡ä»¶å¤¹ä¿¡æ¯

```bash
# æŸ¥çœ‹è¯¦ç»†ä¿¡æ¯
python -m scripts.cli week-folder --info

# è¾“å‡ºç¤ºä¾‹ï¼š
# ğŸ“… å½“å‰å‘¨: 2025-11-10 ~ 2025-11-16
# ğŸ“ æ–‡ä»¶å¤¹è·¯å¾„: /path/to/data/raw/2025-11-10
# ğŸ“„ æ–‡ä»¶æ•°é‡: 5
# âœ… æ–‡ä»¶å¤¹å­˜åœ¨: æ˜¯
```

### 3. åˆ—å‡ºæ‰€æœ‰å‘¨æ–‡ä»¶å¤¹

```bash
# åˆ—å‡ºæ‰€æœ‰å·²åˆ›å»ºçš„å‘¨æ–‡ä»¶å¤¹
python -m scripts.cli week-folder --list

# è¾“å‡ºç¤ºä¾‹ï¼š
# ğŸ“š å…±æœ‰ 3 ä¸ªå‘¨æ–‡ä»¶å¤¹:
# 
#   ğŸ“ 2025-11-03 (2025-11-03 ~ 2025-11-09) - 8 ä¸ªæ–‡ä»¶
#   ğŸ“ 2025-11-10 (2025-11-10 ~ 2025-11-16) - 5 ä¸ªæ–‡ä»¶
#   ğŸ“ 2025-11-17 (2025-11-17 ~ 2025-11-23) - 0 ä¸ªæ–‡ä»¶
```

### 4. ä½¿ç”¨Ingest Agentè¿›è¡Œæ‘˜è¦å¤„ç†

#### æ–¹å¼ä¸€ï¼šä½¿ç”¨Ingestå‘½ä»¤ï¼ˆè‡ªåŠ¨ä½¿ç”¨å½“å‰å‘¨æ–‡ä»¶å¤¹ï¼‰

```bash
# å¦‚æœä¸æŒ‡å®š--week-pathï¼Œä¼šè‡ªåŠ¨ä½¿ç”¨å½“å‰å‘¨æ–‡ä»¶å¤¹
python -m scripts.cli ingest
```

#### æ–¹å¼äºŒï¼šä½¿ç”¨Agent Routerï¼ˆæ™ºèƒ½è·¯ç”±ï¼‰

```bash
# è‡ªåŠ¨è¯†åˆ«ä»»åŠ¡ç±»å‹å¹¶é€‰æ‹©åˆé€‚çš„Agent
python -m scripts.cli router \
  --task "æ€»ç»“è¿™å‘¨æ”¶é›†çš„æ–‡æ¡£" \
  --input-type file_path \
  --input-value "data/raw/2025-11-10" \
  --agent-hint ingest
```

#### æ–¹å¼ä¸‰ï¼šæŒ‡å®šç‰¹å®šå‘¨æ–‡ä»¶å¤¹

```bash
# å¤„ç†æŒ‡å®šå‘¨æ–‡ä»¶å¤¹
python -m scripts.cli ingest --week-path data/raw/2025-11-10
```

## å…¸å‹å·¥ä½œæµç¨‹ç¤ºä¾‹

### åœºæ™¯1ï¼šæ—¥å¸¸æ–‡æ¡£æ”¶é›†å’Œæ‘˜è¦

```bash
# 1. è·å–æœ¬å‘¨æ–‡ä»¶å¤¹è·¯å¾„
python -m scripts.cli week-folder
# è¾“å‡º: âœ… å½“å‰å‘¨æ–‡ä»¶å¤¹: /path/to/data/raw/2025-11-10

# 2. å°†æ–‡æ¡£æ”¾å…¥è¯¥æ–‡ä»¶å¤¹
# ï¼ˆæ‰‹åŠ¨æ“ä½œï¼šå¤åˆ¶æˆ–ç§»åŠ¨æ–‡æ¡£åˆ° data/raw/2025-11-10/ï¼‰

# 3. æŸ¥çœ‹æ–‡ä»¶å¤¹ä¿¡æ¯ï¼Œç¡®è®¤æ–‡ä»¶
python -m scripts.cli week-folder --info

# 4. æ‰§è¡Œæ‘˜è¦å¤„ç†
python -m scripts.cli ingest

# 5. æŸ¥çœ‹ç”Ÿæˆçš„æ‘˜è¦æ–‡ä»¶
# è¾“å‡ºä½ç½®: data/medium-rare/2025-11-10.md
```

### åœºæ™¯2ï¼šä½¿ç”¨Agent Routerè‡ªåŠ¨å¤„ç†

```bash
# ä¸€æ­¥å®Œæˆï¼šæ™ºèƒ½è·¯ç”±åˆ°Ingest Agentå¹¶æ‰§è¡Œ
python -m scripts.cli router \
  --task "å¤„ç†æœ¬å‘¨æ”¶é›†çš„æ–‡æ¡£å¹¶ç”Ÿæˆæ‘˜è¦" \
  --input-type file_path \
  --input-value "data/raw/2025-11-10" \
  --agent-hint ingest
```

### åœºæ™¯3ï¼šæ‰¹é‡å¤„ç†å†å²å‘¨æ–‡ä»¶å¤¹

```bash
# 1. åˆ—å‡ºæ‰€æœ‰å‘¨æ–‡ä»¶å¤¹
python -m scripts.cli week-folder --list

# 2. é€ä¸€å¤„ç†ï¼ˆå¦‚æœéœ€è¦ï¼‰
python -m scripts.cli ingest --week-path data/raw/2025-11-03
python -m scripts.cli ingest --week-path data/raw/2025-11-10
```

## æ”¯æŒçš„æ–‡æ¡£æ ¼å¼

ç³»ç»Ÿæ”¯æŒä»¥ä¸‹æ ¼å¼çš„æ–‡æ¡£ï¼š

- **Markdown**: `.md`, `.markdown`
- **æ–‡æœ¬**: `.txt`
- **PDF**: `.pdf`
- **Word**: `.docx`

## è¾“å‡ºç»“æœ

### æ‘˜è¦æ–‡æ¡£æ ¼å¼

å¤„ç†å®Œæˆåï¼Œä¼šåœ¨ `data/medium-rare/` ç›®å½•ä¸‹ç”Ÿæˆå¯¹åº”çš„æ‘˜è¦æ–‡æ¡£ï¼Œæ–‡ä»¶åæ ¼å¼ä¸º `YYYY-MM-DD.md`ã€‚

æ‘˜è¦æ–‡æ¡£åŒ…å«ä»¥ä¸‹ç»“æ„ï¼š

```markdown
### <æ–‡ä»¶å>
Summary: ...
Key Takeaways:
- ...
- ...
Something New: ...
```

### è¾“å‡ºç¤ºä¾‹

```
âœ… é€‰ä¸­çš„Agent: ingest
æ‰§è¡Œç»“æœ:
  âœ… ingest: /path/to/data/medium-rare/2025-11-10.md

ç”Ÿæˆçš„æ–‡ä»¶:
  ğŸ“„ /path/to/data/medium-rare/2025-11-10.md
```

## JSONæ ¼å¼è¾“å‡º

æ‰€æœ‰å‘½ä»¤éƒ½æ”¯æŒ `--json` å‚æ•°ï¼Œè¾“å‡ºæœºå™¨å¯è¯»çš„JSONæ ¼å¼ï¼š

```bash
# JSONæ ¼å¼è¾“å‡º
python -m scripts.cli week-folder --info --json

# è¾“å‡ºç¤ºä¾‹ï¼š
{
  "week_monday": "2025-11-10",
  "week_sunday": "2025-11-16",
  "folder_path": "/path/to/data/raw/2025-11-10",
  "folder_exists": true,
  "file_count": 5,
  "week_range": "2025-11-10 ~ 2025-11-16"
}
```

## Python API ä½¿ç”¨

å¦‚æœä½ éœ€è¦åœ¨Pythonä»£ç ä¸­ä½¿ç”¨ï¼š

```python
from scripts.folder_manager import (
    get_current_week_folder,
    get_week_folder_info,
    list_raw_folders,
)
from agents.ingest import IngestAgent

# è·å–å½“å‰å‘¨æ–‡ä»¶å¤¹
week_folder = get_current_week_folder(auto_create=True)
print(f"å½“å‰å‘¨æ–‡ä»¶å¤¹: {week_folder}")

# è·å–å‘¨æ–‡ä»¶å¤¹ä¿¡æ¯
info = get_week_folder_info()
print(f"å‘¨èŒƒå›´: {info['week_range']}")
print(f"æ–‡ä»¶æ•°é‡: {info['file_count']}")

# ä½¿ç”¨Ingest Agentå¤„ç†
agent = IngestAgent()
result = agent.execute(week_path=str(week_folder))
print(f"æ‘˜è¦æ–‡ä»¶: {result['output_path']}")
```

## æ³¨æ„äº‹é¡¹

1. **å‘¨ä¸€åŸºå‡†**: ç³»ç»Ÿä½¿ç”¨å‘¨ä¸€ä½œä¸ºä¸€å‘¨çš„å¼€å§‹ï¼ŒåŒä¸€ä¸ªè‡ªç„¶å‘¨å†…çš„ä»»ä½•æ—¥æœŸéƒ½ä¼šæ˜ å°„åˆ°è¯¥å‘¨çš„å‘¨ä¸€æ–‡ä»¶å¤¹

2. **è‡ªåŠ¨åˆ›å»º**: å¦‚æœæ–‡ä»¶å¤¹ä¸å­˜åœ¨ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨åˆ›å»º

3. **æ–‡ä»¶ç»Ÿè®¡**: åªç»Ÿè®¡æ”¯æŒçš„æ–‡æ¡£æ ¼å¼ï¼ˆ.md, .txt, .pdf, .docxï¼‰ï¼Œå…¶ä»–æ–‡ä»¶ä¼šè¢«å¿½ç•¥

4. **å¹¶å‘å¤„ç†**: ç³»ç»Ÿæ”¯æŒå¹¶å‘è¯»å–å¤šä¸ªæ–‡æ¡£ï¼Œæé«˜å¤„ç†æ•ˆç‡

5. **å¢é‡å¤„ç†**: å¦‚æœå‘¨æ–‡ä»¶å¤¹ä¸­æœ‰æ–°æ–‡ä»¶ï¼Œå¯ä»¥é‡æ–°è¿è¡Œ `ingest` å‘½ä»¤ï¼Œä½†ä¼šè¦†ç›–ä¹‹å‰çš„æ‘˜è¦æ–‡ä»¶

## æœ€ä½³å®è·µ

1. **å®šæœŸæ”¶é›†**: æ¯å¤©æˆ–æ¯å‘¨å®šæœŸå°†é‡è¦æ–‡æ¡£æ”¾å…¥å¯¹åº”å‘¨æ–‡ä»¶å¤¹

2. **å‘¨æœ«æ‘˜è¦**: å»ºè®®åœ¨å‘¨æœ«ç»Ÿä¸€æ‰§è¡Œæ‘˜è¦å¤„ç†ï¼Œå›é¡¾æœ¬å‘¨æ”¶é›†çš„å†…å®¹

3. **å‘½åè§„èŒƒ**: å»ºè®®ç»™æ–‡æ¡£èµ·æœ‰æ„ä¹‰çš„æ–‡ä»¶åï¼Œä¾¿äºåç»­æ£€ç´¢

4. **åˆ†ç±»æ•´ç†**: å¯ä»¥è€ƒè™‘åœ¨å‘¨æ–‡ä»¶å¤¹ä¸‹åˆ›å»ºå­æ–‡ä»¶å¤¹è¿›è¡Œåˆ†ç±»ï¼ˆè™½ç„¶å½“å‰æ‘˜è¦ä¼šå¤„ç†æ‰€æœ‰æ”¯æŒçš„æ–‡æ¡£ï¼‰

5. **å®šæœŸå›é¡¾**: å®šæœŸæŸ¥çœ‹ `data/medium-rare/` ç›®å½•ä¸‹çš„æ‘˜è¦æ–‡æ¡£ï¼Œè¿›è¡ŒçŸ¥è¯†å›é¡¾å’Œæ•´ç†

---

**æ›´æ–°æ—¶é—´**: 2025-11-15

